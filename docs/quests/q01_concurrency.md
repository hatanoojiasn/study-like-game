# Quest 01: 協調スケジューリング風の並行処理

## 目的（Objective）
- 公開 API を増やさずに、内部実装だけで「入力・更新・テレメトリ」を協調的に回す設計へ発展させる。

## ルール（Rules）
- 新しい公開関数・公開構造体は禁止。
- スレッド必須ではない。単一スレッドの協調実行でも可。
- 毎フレーム heap 確保を禁止。

## 制約（Constraints）
- 既存の `engine_step(dt, in)` 呼び出しモデルを維持する。
- テレメトリは 250ms 周期を目標にする。

## 受け入れ条件（Definition of Done）
- 入力処理、ゲーム更新、テレメトリ送出が内部タスクとして分離されている。
- 計測値を出せること:
  - `dt` ジッタ（例: 標準偏差 or min/max 差）
  - テレメトリ周期誤差（目標 250ms に対する差）
- 60 秒実行でテレメトリ周期の平均誤差が定義した閾値内（例: ±30ms）

## 実装ヒント
- `engine.c` 内部に小さなタスクテーブルを持ち、次回実行時刻で協調的に回す。
- 長い処理を 1 フレームでやり切らない（細粒度化）。
- テレメトリの時刻基準は `platform_time_ms` を使い、`dt` 累積のみ依存にしない。

## テスト計画（最低限）
1. テレメトリ 250ms 周期テスト（ログ解析）
2. 60 秒連続実行でフレーム落ち率を確認
3. 既存決定性テストが壊れないこと
